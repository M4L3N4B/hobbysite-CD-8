{% extends "merchstore/layout.html" %}
{% block body %}

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <div class="product-details">
        {% for detail in product_qs %}
            <div class="product-detail-block">
                <div class="product-details-header">
                    <h2>{{ detail.name }}</h2>
                    <div class="product-section-description">
                        <p>P{{ detail.price }}</p>
                    </div>
                </div>

                <div class="product-info">
                    <p><strong>Type:</strong> {{ detail.product_type.name }}</p>
                    <p><strong>Description:</strong> {{ detail.description }}</p>
                    <p><strong>Stock:</strong> {{ detail.stock }}</p>
                    <p><strong>Status:</strong> {{ detail.get_status_display }}</p>
                    <p><strong>Owner:</strong> {{ detail.owner }}</p>
                </div>
            </div>
        {% endfor %}

        {% if product_obj.owner != profile %}
            <form method="post" class="purchase-form">
                {% csrf_token %}
                <h2>Buy Product</h2>
                {{ buy_product_form.as_p }}
                <button type="submit" {% if product_obj.stock <= 0 %}disabled{% endif %}>BUY</button>
            </form>
        {% else %}
            <div class="edit-link">
                <a href="{% url 'update_product' product_obj.id %}" class="btn">Update/Edit your product</a>
            </div>
        {% endif %}
    </div>
{% endblock %}
