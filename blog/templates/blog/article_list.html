{% extends "blog/layout.html" %}

{% block body %}
    {% if user.is_authenticated and user.profile %}
        <div class="article-category">
            <h2>Your Articles</h2>
            <ul class="article-category-list">
                {% for article in user_articles %}
                    <li>
                        <a href="{% url 'article_details' article.pk %}">{{ article.title }}</a>
                    </li>
                {% empty %}
                    <li>No articles yet. <a href="{% url 'article_create' %}">Write one?</a></li>
                {% endfor %}
            </ul>
        </div>

        <div class="create-article-link" style="margin-bottom: 15px;">
            <p><a href="{% url 'article_create' %}">Create New Article</a></p>
        </div>
    {% endif %}

    {% for category, articles in articles_by_category.items %}
        <div class="article-category">
            <div class="article-category-description">
                <h2>{{ category.name }}</h2>
                <p>{{ category.description }}</p>
            </div>
            <ul class="article-category-list">
                {% for article in articles %}
                    <li>
                        <a href="{% url 'article_details' article.pk %}">{{ article.title }}</a>
                    </li>
                {% empty %}
                    <li>No articles available.</li>
                {% endfor %}
            </ul>
        </div>
    {% empty %}
        <p>No categories available.</p>
    {% endfor %}
{% endblock %}
